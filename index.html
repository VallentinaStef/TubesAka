<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard Analisis Algoritma Kelipatan 3</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: #f4f7f6;
        margin: 20px;
      }
      .container {
        max-width: 900px;
        margin: auto;
        background: white;
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }
      h1 {
        text-align: center;
        color: #2c3e50;
      }
      .input-section {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        justify-content: center;
      }
      input {
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        width: 200px;
      }
      button {
        padding: 10px 20px;
        background: #3498db;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }
      .results {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-top: 20px;
      }
      .card {
        padding: 15px;
        border: 1px solid #eee;
        border-radius: 8px;
        background: #fafafa;
      }
      .card h3 {
        margin-top: 0;
        color: #34495e;
        border-bottom: 2px solid #3498db;
        padding-bottom: 5px;
      }
      .chart-container {
        margin-top: 30px;
        height: 300px;
      }
      .analysis {
        margin-top: 20px;
        padding: 15px;
        background: #ecf0f1;
        border-radius: 8px;
        color: #2c3e50;
      }
      .error {
        color: #e74c3c;
        font-weight: bold;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <h1>Analisis Efisiensi: Kelipatan 3</h1>

      <div class="input-section">
        <input type="number" id="inputN" value="10000" />
        <button onclick="mulaiAnalisis()">Jalankan Analisis</button>
      </div>

      <div class="results">
        <div class="card">
          <h3>Versi Iteratif</h3>
          <p>Hasil: <span id="resIter">-</span></p>
          <p>Rata-rata Waktu: <span id="timeIter">-</span> ms</p>
          <p>Kompleksitas: <b>O(n)</b></p>
        </div>

        <div class="card">
          <h3>Versi Rekursif</h3>
          <p>Hasil: <span id="resRec">-</span></p>
          <p>Rata-rata Waktu: <span id="timeRec">-</span> ms</p>
          <p>Kompleksitas: <b>O(n)</b></p>
        </div>
      </div>

      <div class="chart-container">
        <canvas id="performanceChart"></canvas>
      </div>

      <div class="analysis">
        <b>Kesimpulan:</b>
        <p id="conclusion">-</p>
      </div>
    </div>

    <script>
      /**
       * Algoritma Iteratif
       * Kompleksitas Waktu: O(n)
       * Kompleksitas Ruang: O(1)
       */
      function sumIterative(n) {
        let total = 0;
        for (let i = 1; i <= n; i++) {
          if (i % 3 === 0) total += i;
        }
        return total;
      }

      /**
       * Algoritma Rekursif
       * Kompleksitas Waktu: O(n)
       * Kompleksitas Ruang: O(n)
       */
      function sumRecursive(n) {
        if (n <= 0) return 0;
        return (n % 3 === 0 ? n : 0) + sumRecursive(n - 1);
      }

      // Fungsi pengukuran rata-rata running time
      function measure(fn, n, repeat = 50) {
        let total = 0;
        for (let i = 0; i < repeat; i++) {
          const start = performance.now();
          fn(n);
          total += performance.now() - start;
        }
        return total / repeat;
      }

      // Inisialisasi grafik
      const ctx = document.getElementById("performanceChart").getContext("2d");
      const performanceChart = new Chart(ctx, {
        type: "line",
        data: {
          labels: [],
          datasets: [
            {
              label: "Iteratif (ms)",
              data: [],
              borderColor: "#3498db",
              fill: false,
            },
            {
              label: "Rekursif (ms)",
              data: [],
              borderColor: "#e74c3c",
              fill: false,
            },
          ],
        },
        options: { responsive: true, maintainAspectRatio: false },
      });

      function mulaiAnalisis() {
        const inputSizes = [1, 10, 50, 100, 500, 1000, 5000, 10000];
        performanceChart.data.labels = [];
        performanceChart.data.datasets[0].data = [];
        performanceChart.data.datasets[1].data = [];

        let lastIterTime = 0;
        let lastRecTime = 0;

        inputSizes.forEach((n) => {
          const iterTime = measure(sumIterative, n);
          let recTime = null;

          try {
            recTime = measure(sumRecursive, n, 10);
          } catch {
            recTime = null;
          }

          performanceChart.data.labels.push(n);
          performanceChart.data.datasets[0].data.push(iterTime.toFixed(4));
          performanceChart.data.datasets[1].data.push(
            recTime ? recTime.toFixed(4) : null
          );

          lastIterTime = iterTime;
          lastRecTime = recTime;
        });

        const finalN = inputSizes[inputSizes.length - 1];
        document.getElementById("resIter").innerText = sumIterative(finalN);
        document.getElementById("resRec").innerText =
          lastRecTime === null ? "Stack Overflow" : sumRecursive(finalN);

        document.getElementById("timeIter").innerText = lastIterTime.toFixed(4);
        document.getElementById("timeRec").innerText =
          lastRecTime === null ? "N/A" : lastRecTime.toFixed(4);

        document.getElementById("conclusion").innerText =
          "Berdasarkan pengujian terhadap berbagai ukuran input, algoritma iteratif memiliki waktu eksekusi yang lebih stabil dan efisien dibandingkan algoritma rekursif. Meskipun keduanya memiliki kompleksitas waktu O(n), algoritma rekursif membutuhkan ruang memori lebih besar akibat pemanggilan fungsi berulang.";

        performanceChart.update();
      }
    </script>
  </body>
</html>
